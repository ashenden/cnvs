!function ($) {

  /* ----------------------------------------------------------------------------------------------------
  -------------------------------------------------------------------------------------------------------

  DOM Event Listeners

  -------------------------------------------------------------------------------------------------------
  ---------------------------------------------------------------------------------------------------- */

  $(document).ready(function() {

  });

  $(window).on("load", function() {

    init();

  });






  /* ----------------------------------------------------------------------------------------------------
  -------------------------------------------------------------------------------------------------------

  Initialize

  -------------------------------------------------------------------------------------------------------
  ---------------------------------------------------------------------------------------------------- */

  function init() {

    /* ----------------------------------------------------------------------------------------------------
    Define Namespace
    ---------------------------------------------------------------------------------------------------- */

    $.app = {};

    $.app.stage = $("#stage");

    $.app.scrollbar_width = get_scrollbar_width();



    /* ----------------------------------------------------------------------------------------------------
    Define window resize event listener
    ---------------------------------------------------------------------------------------------------- */

    $(window).resize(function () {

      window_resize();

    });

    window_resize();



    /* ----------------------------------------------------------------------------------------------------
    Define window scroll event listener
    ---------------------------------------------------------------------------------------------------- */

    $(window).scroll(function () {

      window_scroll();

    });

    window_scroll();



    /* ----------------------------------------------------------------------------------------------------
    Scroll To Anchor
    ---------------------------------------------------------------------------------------------------- */

    scroll_to_anchor();



    /* ----------------------------------------------------------------------------------------------------
    Simulate placeholder text
    ---------------------------------------------------------------------------------------------------- */

    simulate_placeholders();

    window.simulate_placeholders = simulate_placeholders;



    /* ----------------------------------------------------------------------------------------------------
    Google Code Pretty Print
    ---------------------------------------------------------------------------------------------------- */

    window.prettyPrint && prettyPrint();



    /* ----------------------------------------------------------------------------------------------------
    Initialize Page Content Navigation
    ---------------------------------------------------------------------------------------------------- */

    page_content_navigation_update();

    $('.form-control-group input').focus(function() {

      $(this).parent().addClass('focus');

    }).blur(function() {

      $(this).parent().removeClass('focus');

    });


    /* ----------------------------------------------------------------------------------------------------
    Initialize Views
    ---------------------------------------------------------------------------------------------------- */

    views_init();

  }






  /* ----------------------------------------------------------------------------------------------------
  -------------------------------------------------------------------------------------------------------

  Initialize: Views

  -------------------------------------------------------------------------------------------------------
  ---------------------------------------------------------------------------------------------------- */

  function views_init() {

  }






  /* ----------------------------------------------------------------------------------------------------
  -------------------------------------------------------------------------------------------------------

  Event Handler: Window Resize

  -------------------------------------------------------------------------------------------------------
  ---------------------------------------------------------------------------------------------------- */

  function window_resize() {

      var responsive_viewport = $(window).width() + $.app.scrollbar_width;



    /* ----------------------------------------------------------------------------------------------------
    Adjust Stage Height for WP Admin Bar
    ---------------------------------------------------------------------------------------------------- */

    var wordpress_admin_bar = $("#wpadminbar");

    if (wordpress_admin_bar != null) {

     var wordpress_admin_bar_height = wordpress_admin_bar.outerHeight();

     $("#stage").css({

      'margin-top'  :  wordpress_admin_bar_height

     });

    }



    /* ----------------------------------------------------------------------------------------------------
    Invoke Window Scroll method
    ---------------------------------------------------------------------------------------------------- */

    window_scroll();



    /* ----------------------------------------------------------------------------------------------------
    Anchor Page Content Navigation
    ---------------------------------------------------------------------------------------------------- */

    $('#page-content-navigation').affix({

      offset: {

        top: function () {

          var page_content_navigation = $('#page-content-navigation');
          var page_content_navigation_threshold_top = $('#page-content').offset().top;

          return (page_content_navigation_threshold_top);

        },

        bottom: function () {

          var footer_height = $('#footer').outerHeight(true);
          var page_content_navigation_margin_bottom = parseInt(jQuery('#page-content-navigation').css('margin-bottom'));
          var page_content_navigation_threshold_bottom = footer_height + page_content_navigation_margin_bottom;

          return (page_content_navigation_threshold_bottom);

        }

      }

    });

  }

  window.window_resize = window_resize;






  /* ----------------------------------------------------------------------------------------------------
  -------------------------------------------------------------------------------------------------------

  Event Handler: Window Scroll

  -------------------------------------------------------------------------------------------------------
  ---------------------------------------------------------------------------------------------------- */

  function window_scroll() {

    var scroll_top = $(window).scrollTop() - $('#canvas').offset().top;

    page_content_navigation_update();

  }






  /* ----------------------------------------------------------------------------------------------------
  -------------------------------------------------------------------------------------------------------

  Page Content Navigation

  -------------------------------------------------------------------------------------------------------
  ---------------------------------------------------------------------------------------------------- */

  function page_content_navigation_update() {

    var scroll_top = $(window).scrollTop() - $('#canvas').offset().top;
    var page_content_navigation = $('#page-content-navigation');

    page_content_navigation.find('li').each(function() {

      $(this).children('a').each(function() {

        var el = $($(this).attr('href'));

        if (el != null) {

          var el_top = el.offset().top;
          var el_height = el.height();

          if ((scroll_top >= (el_top - 1)) && (scroll_top < (el_top + el_height))) {

            $(this).parent().addClass('active');

          } else {

            $(this).parent().removeClass('active');

          }


        }

      })

    });

  }






  /* ----------------------------------------------------------------------------------------------------
  -------------------------------------------------------------------------------------------------------

  Simulate input placeholder

  -------------------------------------------------------------------------------------------------------
  ---------------------------------------------------------------------------------------------------- */

  function simulate_placeholders() {

    var input = document.createElement("input");

    if(('placeholder' in input) == false) {

      $('[placeholder]').focus(function() {

        var i = $(this);

        if(i.val() == i.attr('placeholder')) {

          i.val('').removeClass('placeholder');

          if(i.hasClass('password')) {

            i.removeClass('password');
            this.type='password';

          }

        }

      }).blur(function() {

        var i = $(this);

        if(i.val() == '' || i.val() == i.attr('placeholder')) {

          if(this.type=='password') {

            i.addClass('password');
            this.type='text';

          }

          i.addClass('placeholder').val(i.attr('placeholder'));

        }

      }).blur().parents('form').submit(function() {

        $(this).find('[placeholder]').each(function() {

          var i = $(this);

          if(i.val() == i.attr('placeholder')) {

            i.val('');

          }

        })

      });

    }

  }






  /* ----------------------------------------------------------------------------------------------------
  -------------------------------------------------------------------------------------------------------

  Get Browser Dimensions

  -------------------------------------------------------------------------------------------------------
  ---------------------------------------------------------------------------------------------------- */

  function get_browser_dimensions() {

    var dimensions = {

      width: 0,
      height: 0

    };

    if ($(window)) {

      dimensions.width = $(window).width();
      dimensions.height = $(window).height();

    }

    return dimensions;

  }






  /* ----------------------------------------------------------------------------------------------------
  -------------------------------------------------------------------------------------------------------

  Get Scrollbar Width

  -------------------------------------------------------------------------------------------------------
  ---------------------------------------------------------------------------------------------------- */

  function get_scrollbar_width() {

      var div = $('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div></div>');
      $('body').append(div);
      var w1 = $('div', div).innerWidth();
      div.css('overflow-y', 'auto');
      var w2 = $('div', div).innerWidth();
      $(div).remove();
      return (w1 - w2);

  }






  /* ----------------------------------------------------------------------------------------------------
  -------------------------------------------------------------------------------------------------------

  Get Scrollbar Width

  -------------------------------------------------------------------------------------------------------
  ---------------------------------------------------------------------------------------------------- */

  function scroll_to_anchor(speed) {

    if (typeof speed === "undefined" || speed === null) {

      speed = 500;

    }

    $('a[href*=#]:not([href=#])').click(function() {

      if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') && location.hostname == this.hostname) {

        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');

        if (target.length) {

          $('html,body').animate({

            scrollTop: target.offset().top

          }, speed);

          return false;

        }

      }

    });

  }

} (window.jQuery)
